<!DOCTYPE html>
<html lang="kn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ಟ್ಯಾಗ್ ಫಲಿತಾಂಶಗಳು - ವೇದಾಭೇದ</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
        <script src="assets/js/config.js"></script>
        <script src="assets/js/script.js" defer></script>
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-title" content="ವೇದಾಭೇದ">
        <meta name="theme-color" content="#3498db">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="logo">
            <a href="/">
                <h1>ವೇದಭೇದ</h1>
                <p>Islamic & Hindu Studies</p>
            </a>
        </div>        
            <button id="menuToggle"><i class="fas fa-bars"></i></button>
            <ul class="nav-menu">
                <li><a href="index.html">ಮುಖಪುಟ</a></li>
                <li><a href="#" class="category" data-category="islam">ಇಸ್ಲಾಂ</a></li>
                <li><a href="#" class="category" data-category="hindu">ಹಿಂದೂ</a></li>
                <li><a href="#" class="category" data-category="comparative">ತುಲನಾತ್ಮಕ</a></li>
                <li><a href="about.html">ನಮ್ಮ ಬಗ್ಗೆ</a></li>
            </ul>
        </nav>
    </header>

    <section class="tag-header">
        <div class="tag-content">
            <h2 id="tagTitle">ಟ್ಯಾಗ್: <span id="currentTag"></span></h2>
            <p>ಈ ಟ್ಯಾಗ್‌ನೊಂದಿಗೆ ಸಂಬಂಧಿಸಿದ ಎಲ್ಲಾ ಲೇಖನಗಳು</p>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="ಲೇಖನಗಳನ್ನು ಹುಡುಕಿ...">
                <button id="searchButton"><i class="fas fa-search"></i></button>
            </div>
        </div>
    </section>

    <main>
        <div id="postContainer" class="post-grid">
            <!-- Posts will be loaded dynamically -->
        </div>

        <div class="pagination">
            <button id="prevPage"><i class="fas fa-chevron-left"></i></button>
            <span id="currentPage">1</span>
            <button id="nextPage"><i class="fas fa-chevron-right"></i></button>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>ವೇದಾಭೇದ</h3>
                <p>ಇಸ್ಲಾಮಿಕ್ ಮತ್ತು ಹಿಂದೂ ಅಧ್ಯಯನಗಳ ಒಂದು ಸಮಗ್ರ ವೇದಿಕೆ. ಧಾರ್ಮಿಕ ಸಹಿಷ್ಣುತೆ ಮತ್ತು ಅಂತರ-ಧಾರ್ಮಿಕ ಸಂವಾದವನ್ನು ಉತ್ತೇಜಿಸುವುದು ನಮ್ಮ ಗುರಿಯಾಗಿದೆ.</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>ಉಪಯುಕ್ತ ಲಿಂಕ್‌ಗಳು</h3>
                <ul class="footer-links">
                    <li><a href="index.html">ಮುಖಪುಟ</a></li>
                    <li><a href="about.html">ನಮ್ಮ ಬಗ್ಗೆ</a></li>
                    <li><a href="#">ಸಂಪರ್ಕಿಸಿ</a></li>
                    <li><a href="#">ನಿಯಮಗಳು & ಷರತ್ತುಗಳು</a></li>
                    <li><a href="#">ಗೌಪ್ಯತಾ ನೀತಿ</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>ಇತ್ತೀಚಿನ ಪೋಸ್ಟ್‌ಗಳು</h3>
                <ul class="footer-posts">
                    <li><a href="post.html?id=1">ಇಸ್ಲಾಂ ಮತ್ತು ಹಿಂದೂ ಧರ್ಮದಲ್ಲಿ ಏಕದೇವೋಪಾಸನೆ</a></li>
                    <li><a href="post.html?id=2">ಕುರಾನ್ ಮತ್ತು ವೇದಗಳಲ್ಲಿ ಜ್ಞಾನದ ಮಹತ್ವ</a></li>
                    <li><a href="post.html?id=3">ಶ್ರೀಕೃಷ್ಣನ ಜೀವನದಿಂದ ಪ್ರಮುಖ ಪಾಠಗಳು</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>ನಮ್ಮ ನ್ಯೂಸ್‌ಲೆಟರ್‌ಗೆ ಸೇರಿ</h3>
                <p>ನಮ್ಮ ಇತ್ತೀಚಿನ ಲೇಖನಗಳು ಮತ್ತು ಅಪ್‌ಡೇಟ್‌ಗಳನ್ನು ಪಡೆಯಲು ಸಬ್‌ಸ್ಕ್ರೈಬ್ ಮಾಡಿ.</p>
                <form class="newsletter-form">
                    <input type="email" placeholder="ನಿಮ್ಮ ಇಮೇಲ್ ವಿಳಾಸ" required>
                    <button type="submit">ಸಬ್‌ಸ್ಕ್ರೈಬ್</button>
                </form>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>© 2023 ವೇದಾಭೇದ. ಎಲ್ಲ ಹಕ್ಕುಗಳನ್ನು ಕಾಯ್ದಿರಿಸಲಾಗಿದೆ.</p>
        </div>
    </footer>
    
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Get tag from URL parameter
            const params = new URLSearchParams(window.location.search);
            const tag = params.get("tag");
            
            if (!tag) {
                window.location.href = "index.html";
                return;
            }
            
            // Set page title and current tag display
            document.title = `${tag} - ವೇದಾಭೇದ`;
            document.getElementById("currentTag").textContent = tag;
            
            // Load posts with the specified tag
            loadTaggedPosts(tag);
            
            // Setup event listeners
            setupSearch();
            setupPagination();
            
            // Toggle mobile menu
            document.getElementById("menuToggle").addEventListener("click", function() {
                document.querySelector(".nav-menu").classList.toggle("active");
            });
        });
        
        function loadTaggedPosts(tag, page = 1) {
            const postContainer = document.getElementById('postContainer');
            const postsPerPage = 6;
            
            // Filter posts by tag
            let taggedPosts = postsDatabase.filter(post => post.tags && post.tags.includes(tag));
            
            // Calculate pagination
            const totalPages = Math.ceil(taggedPosts.length / postsPerPage);
            const startIndex = (page - 1) * postsPerPage;
            const paginatedPosts = taggedPosts.slice(startIndex, startIndex + postsPerPage);
            
            // Update pagination UI
            document.getElementById('currentPage').textContent = page;
            document.getElementById('prevPage').disabled = page === 1;
            document.getElementById('nextPage').disabled = page >= totalPages;
            
            // Clear container
            postContainer.innerHTML = '';
            
            // Generate post items
            if (paginatedPosts.length === 0) {
                postContainer.innerHTML = '<div class="no-results">ಈ ಟ್ಯಾಗ್‌ನೊಂದಿಗೆ ಯಾವುದೇ ಲೇಖನಗಳು ಕಂಡುಬಂದಿಲ್ಲ</div>';
                return;
            }
            
            paginatedPosts.forEach(post => {
                const postElement = document.createElement('a');
                postElement.href = `post.html?id=${post.id}`;
                postElement.className = 'post-item';
                
                let categoryLabel = '';
                switch(post.category) {
                    case 'islam':
                        categoryLabel = 'ಇಸ್ಲಾಂ';
                        break;
                    case 'hindu':
                        categoryLabel = 'ಹಿಂದೂ';
                        break;
                    case 'comparative':
                        categoryLabel = 'ತುಲನಾತ್ಮಕ';
                        break;
                }
                
                postElement.innerHTML = `
                    <div class="post-img">
                        <img src="${post.image}" alt="${post.title}">
                        <span class="post-category-label ${post.category}">${categoryLabel}</span>
                    </div>
                    <div class="post-content">
                        <h2 class="post-title">${post.title}</h2>
                        <p class="post-excerpt">${post.excerpt}</p>
                        <div class="post-meta">
                            <span><i class="far fa-calendar-alt"></i> ${post.date}</span>
                            <span><i class="far fa-user"></i> ${post.author}</span>
                        </div>
                    </div>
                `;
                
                postContainer.appendChild(postElement);
            });
        }
    </script>
</body>
</html>
